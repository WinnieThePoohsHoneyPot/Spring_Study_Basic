# AOP

## 1. AOP가 필요한 상황

- 모든 메소드의 호출시간을 측정하고싶다면?
- 발생 문제
    - 회원가입, 회원 조회에 시간을 측정하는 기능은 핵심 기능이 아님.
    - 시간을 측정하는 로직은 공통 관심사항
    - 시간을 측정하는 로직과 핵심 비즈니스의 로직이 섞여서 유지보수가 어려움.
    - 시간을 측정하는 로직을 별도의 공통 로직으로 만들기 매우 어려움.
    - 시간을 측정하는 로직을 변경할 때 모든 로직을 찾아가면서 변경해야 함.
- 공통 관심 사항(cross-cutting concern) vs 핵심 관심 사항(core concern)
    - 시간측정 → 공통 관심 사항
    - 회원가입 , 회원 조회 → 핵심 관심 사항

---

## 2. AOP 적용

- AOP: Aspect Oriented Programming = 관점 지향 프로그래밍
- 공통 관심 사항(cross-cutting concern) vs 핵심 관심 사항(core concern) 을 분리하는것!
    - ex) 시간 측정 로직을 한곳에 다 모아놓고 내가 원하는곳에서 적용할것이라고 지적만 해주는것!
- `@Aspect` AOP는 aspect어노테이션을 써야 aop로 사용이 가능함.
- `@Around("execution(* com.eejuuung.hellospring..*(..))")`
    - 어디에 적용할지 타겟팅
    - 해당 문구는 나의 패키지 하위에는 다 적용하겠다는 의미

- 기존 발생문제 해결
    - 핵심 관심 사항과 공통 관심 사항의 분리!
    - 시간을 측정하는 로직을 별도의 공통 로직으로 생성
    - 핵심 관심 사항을 깔끔하게 유지
    - 변경이 필요하면 해당 로직만 변경하면 전체 수정 가능
    - 원하는 적용 대상을 선택 가능

- AOP 적용 전 의존관계
    - 메소드 호출
- AOP 적용 후 의존관계
    - 가짜 멤버 서비스를 만듬 (프록시)
    - 스프링이 올라올 때 컨테이너에 스프링 빈을 등록할 때 진짜 스프링 빈이 아닌 해당 프록시를 앞에 세워놓음.
    - 그리고 해당 프록시가 끝나면 실제 서비스를 호출해줌.

---
